{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["//========= Setup the Attachment Modal.\n/*\n(function () {\n    var attachmentModal = $('#navigationAttachMediaModal');\n    new AttachmentModal({\n        $wrapper: attachmentModal,\n        $fileUpload: attachmentModal.find('#fileupload'),\n        $postAs: 'publish-as-hidden-md',\n        $importForm: attachmentModal.find('#import'),\n        $importHelp: attachmentModal.find('#importUrl .help-block'),\n        $importUrlGroup: attachmentModal.find('#importUrl'),\n        $importUrl: attachmentModal.find('input[name=url]'),\n        $profileMedia: 0,\n        $autoUpload: 1,\n        $confidentiality: attachmentModal.find('input:radio[name=navigationAttachMediaModalConfidentiality]')\n    });\n})();\n\n(function() {\n    var attachmentModal = $('#postAttachMediaModal');\n    new AttachmentModal({\n        $wrapper: attachmentModal,\n        $fileUpload: attachmentModal.find('#fileupload'),\n        $postAs: 'publish-as-hidden-md',\n        $importForm: attachmentModal.find('#import'),\n        $importHelp: attachmentModal.find('#importUrl .help-block'),\n        $importUrlGroup: attachmentModal.find('#importUrl'),\n        $importUrl: attachmentModal.find('input[name=url]'),\n        $profileMedia: 0,\n        $postMediaModal: 1,\n        $mediaTemplate: $('#mediaNewsTemplate'),\n        $autoUpload: 1,\n        $confidentiality: attachmentModal.find('input:radio[name=navigationAttachMediaModalConfidentiality]')\n    });\n})();\n*/\n\n(function($) {\n    \n    /* geolocate */\n    /* has been moved in page needed map\n    if(navigator.geolocation){\n        navigator.geolocation.getCurrentPosition(myPosition, errorPosition, {maximumAge:600000, enableHighAccuracy:true});\n    }\n    */\n    \n    $(\"img.lazy\").lazyload();\n    \n    if($('#sidebar').is(':visible')){\n        $('#sidebar').scrollToFixed({\n             marginTop: function() {\n                var marginTop = $(window).height() - $('#sidebar').outerHeight(true) - 40;\n                if (marginTop >= 0) return 20;\n                return marginTop;\n            }\n        });\n    \n        $('#messages-list').scrollToFixed({\n             marginTop: function() {\n                var marginTop = $(window).height() - $('#messages-list').outerHeight(true) - 40;\n                if (marginTop >= 0) return 20;\n                return marginTop;\n            }\n        });\n    }\n    \n    \n    // Initialise ajax header for token csrf\n    $.ajaxSetup({\n        headers : {\n            'X-CSRF-Token' : $('meta[name=\"_token\"]').attr('content')\n        }\n    });\n    \n    // \"ajax history\"\n    $(window).bind('hashchange', function() {\n        if(historyTab != ''){\n            tlHistory();\n        }\n    });\n    \n    //auto fire modal if id exists\n    if($(\"#autoFireModal\").length) {\n      $(\"#autoFireModal\").modal('show');\n    }\n\t\n\t//auto fire modal if id exists\n    if($(\"#autoFireMediaModal\").length) {\n      $(\"#autoFireMediaModal\").modal('show');\n    }\n    \n    // Fix input element click problem\n    $('.dropdown-menu .menu-profile-list').click(function(e) {\n        e.stopPropagation();\n    });\n    \n    /*\n    mainDropdownHeight();\n    $( window ).resize(function(){\n            mainDropdownHeight();\n    });\n    */\n    \n    // Add down arrow only to menu items with submenus\n    $(\".dropdown > li:has('ul')\").each(function() {\n        $(this).find(\"a:first\").append(\"<img src='images/down-arrow.png' />\");\n    });\n    \n    //toggle visibility\n    $(document).on('click', \"[data-toggle='tl-toggle']\", function(e) {\n        e.preventDefault();\n        that = $(this);\n        var target = that.data('target');\n        var state = that.data('state');\n        if(state == \"closed\") {\n            $(target).each(function(){\n                if(!$(this).hasClass('active')){\n                    $(this).toggle();\n                }\n            });            \n            that.find('span').removeClass('glyphicon-plus');\n            that.find('span').addClass('glyphicon-minus');\n            that.data('state', 'opened');\n        }\n        if(state == \"opened\") {\n            $(target).each(function(){\n                if(!$(this).hasClass('active')){\n                    $(this).toggle();\n                }\n            });            \n            $that.find('span').removeClass('glyphicon-minus');\n            $that.find('span').addClass('glyphicon-plus');\n            $that.data('state', 'closed');\n        }\n    });\n    \n    //block page scroll when mouseWheel on tchat, menus\n    $(document).on('DOMMouseScroll mousewheel', '.chatUserList, #netframe-main-dropdown', function(ev) {\n        var $this = $(this),\n            scrollTop = this.scrollTop,\n            scrollHeight = this.scrollHeight,\n            height = $this.height(),\n            delta = (ev.type == 'DOMMouseScroll' ?\n                ev.originalEvent.detail * -40 :\n                ev.originalEvent.wheelDelta),\n            up = delta > 0;\n\n        var prevent = function() {\n            ev.stopPropagation();\n            ev.preventDefault();\n            ev.returnValue = false;\n            return false;\n        }\n\n        if (!up && -delta > scrollHeight - height - scrollTop) {\n            // Scrolling down, but this will take us past the bottom.\n            $this.scrollTop(scrollHeight);\n            return prevent();\n        } else if (up && delta > scrollTop) {\n            // Scrolling up, but this will take us past the top.\n            $this.scrollTop(0);\n            return prevent();\n        }\n    });\n    \n    // form html for browser don't support fields date, time...\n    webshims.setOptions('waitReady', false);\n    webshims.setOptions('forms-ext', {types: 'date'});\n    webshims.polyfill('forms forms-ext');\n    \n    // ========= Fixed & Hack Modal Bootstrap, Reload Content & Remove Content\n    // of modal when click open\n    $(document).on('hidden.bs.modal', '.modal-emptyable', function (e) {\n        $(this).data('bs.modal', null);\n        $(this).find(\".modal-content\").empty()\n    });\n\n    // TOOLTIP\n    $('[data-toggle=tooltip]').tooltip();\n    \n    // POPOVER\n    $('.fn-tl-popover').popover({\n        trigger: 'click',\n        animate: true,\n        html: true,\n        content: function(){\n            var div_id =  \"tmp-id-\" + $.now();\n            return popoverContent($(this), div_id);\n        }\n    });\n\t\n    $('body').on('click', function (e) {\n    $('[data-toggle=\"popover\"]').each(function () {\n        //the 'is' for buttons that trigger popups\n        //the 'has' for icons within a button that triggers a popup\n        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {\n            $(this).popover('hide');\n        }\n    });\n});\n    \n    function popoverContent(popoverLink, div_id){\n        $.get(popoverLink.data('url'),function(data) {\n            var height1 = $('#'+div_id).height();\n            $('#'+div_id).html(data.view);\n            var  height2 = $('#'+div_id).height();\n            if($('.navbar-fixed-bottom').is(':visible') && height1 != null && height2 != null){\n                var popoverTop = $('#'+div_id).closest('.popover').offset().top;\n                var newPopoverTop = popoverTop - (height2 - height1 - 30);\n                $('#'+div_id).closest('.popover').css('top', newPopoverTop);\n            }\n        });\n        return '<div id=\"'+ div_id +'\"><div class=\"loader-notification media\"><div class=\"media-body\"><span class=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\"></span></div></div></div>';\n    }\n\n    // --------------------- CONFIRM ALERT TO DELETE ITEM IN AJAX\n    /*\n     * ex: <a href=\"#url\" class=\"confirm-delete\" data-txtconfirm=\"my texte\n     * displaying\"></a>\n     */\n    $(document).on('click', '.fn-confirm-delete', function(e) {\n        var _confirm = confirm($(this).data('txtconfirm'));\n\n        if (!_confirm) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            return false;\n        }\n        else{\n            e.preventDefault();\n            e.stopPropagation();\n            var linkHref = $(this).attr('href');\n            var el = $(this);\n\n            $.get(linkHref, function( data ) {\n                if(data.delete === true) {\n                    el.parents(data.targetId).fadeOut('slow', function() {\n                        $(this).remove();\n                    });\n                }\n            });\n        }\n\n    });\n\n    // --------------------- CHOOSE PROFILE NAVIGATE\n    $('.f-navigate-profile').bind('click', function(e) {\n        e.preventDefault();\n        var el = $(this);\n        var targetEl = $('#profile-navbar');\n        var targetDropdown = el.parents('.dropdown').find('li.row-fluid');\n\n        targetDropdown.on('hide.bs.dropdown', function() {\n            return false;\n        });\n        \n        $.post(\"/netframe/navigate-profile\", {\n            profile : el.data('profile'),\n            id : el.data('id'),\n            name : el.data('name')\n        }, function(data) {\n            var profileTag = targetEl.find('.profile-name');\n            profileTag.slideUp('normal', function() {\n                var renderHtml = null;\n\n                renderHtml = data.profileName;\n                \n                $(this).text(renderHtml).slideDown('normal');\n            });\n            \n            targetEl.attr('href', data.url);\n            $('.navbar-fixed-bottom').find('#profile-navbar').attr('href', data.url);\n            \n            var profileTagImg = targetEl.find('.profile-image');\n            var profileTagImgXs = $('.navbar-fixed-bottom').find('#profile-navbar').find('.profile-image');\n            if(data.profileImage != 'null'){\n                srcImage = '/media/download/'+data.profileImage+'?thumb=1';\n            }\n            else{\n                srcImage = '/assets/img/avatar/'+data.profileType+'.jpg';\n            }\n            profileTagImg.attr('src', srcImage);\n            profileTagImgXs.attr('src', srcImage);\n        });\n\n    });\n\n    $(document).on('click', \".f-publish-as\", function(e) {\n        e.preventDefault();\n        var el = $(this);\n        var dataProfileType = el.data('profile');\n        var dataProfileId = el.data('profile-id');\n        var target = el.closest('.tl-publish-as').find('.tl-display-as');\n        var mainForm = el.closest('.tl-publish-as').data('target-form');\n        var secondaryChoice = el.closest('.tl-publish-as').data('secondary');\n        var postfixTarget = el.closest('.tl-publish-as').data('postfix');\n        var targetInputId = el.closest('.tl-publish-as').data('target-input-id');\n        var targetInputType = el.closest('.tl-publish-as').data('target-input-type');\n        \n        // target main post form\n        var targetForm = $(mainForm).find(\"#publish-as-hidden-\"+postfixTarget);\n        console.log(mainForm);\n        console.log(targetForm);\n        var inputHiddenIdForeign = targetForm.find('input[name=\"'+targetInputId+'\"]');\n        var inputHiddenTypeForeign = targetForm.find('input[name=\"'+targetInputType+'\"]');\n        \n        if(dataProfileType != 'user' && secondaryChoice == 0){\n            $('.tl-publish-as-choice').removeClass('hidden');\n        }\n        else if(secondaryChoice == 0){\n            $('.tl-publish-as-choice').addClass('hidden');\n        }\n\n        // modify selector choice\n        target.html(el.html());\n        \n        // update hidden author fields\n        inputHiddenIdForeign.val(dataProfileId);\n        inputHiddenTypeForeign.val(dataProfileType);\n    });\n\n    // --------------------- LIKE BUTTON FUNCTION\n    $(document).on('click', '.fn-netframe-like', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        var el = $(this);\n        var refreshIcon = '.glyphicon-refresh-animate';\n\n        // manage loading icon\n        el.find('.label-info').stop().slideUp('fast', function() {\n            el.find(refreshIcon).removeClass('hide');\n        });\n\n        var dataForeign = el.data('tl-like');\n\n        var jqXhr = $.post(\"/netframe/like\", {\n            postData : dataForeign\n        });\n\n        jqXhr.success(function(data) {\n            var targetLineNumber = el.find('.like-number');\n            targetLineNumber.text(parseInt(targetLineNumber\n                    .text())\n                    + parseInt(data.increment));\n\n            if (data.hasOwnProperty('likeThis')) {\n                el.addClass('active');\n            } else {\n                el.removeClass('active');\n            }\n\n        }).error(function(xhr) {\n            console.log(xhr.responseText);\n        }).complete(function(data) {\n            el.find(refreshIcon).addClass('hide');\n            el.find('.label-info').stop().slideDown('normal',\n                    function() {\n                        $(this).removeAttr('style');\n                    });\n        });\n\n    });\n    \n    \n    // --------------------- ADD FRIEND PROFILE USER FUNCTION\n    $(document).on('click', '.fn-add-friend', function(e) {\n        e.preventDefault();\n        var el = $(this);\n        var targetAddWay = el.find('.add-way');\n        var refreshIcon = '.glyphicon-refresh-animate';\n        var actionTypeButton = null;\n\n        el.find(targetAddWay).stop().slideUp('fast', function() {\n            el.find(refreshIcon).removeClass('hide');\n        });\n        \n        if (el.data('tl-add')) {\n            var dataForeign = el.data('tl-add');\n            actionTypeButton = \"add\";\n        \n        } else if (el.data('tl-unlocked')) {\n            var dataForeign = el.data('tl-unlocked');\n            actionTypeButton = 'unlocked';\n        }\n        \n        var jqXhr = $.post(laroute.route('friend.ask'), {\n            postData : dataForeign,\n            type\t : actionTypeButton\n        });\n        \n        jqXhr.success(function(data) {\n           if (data.hasOwnProperty('addThis') || data.hasOwnProperty('ReAddThis') ) {\n           }\n           else if(data.hasOwnProperty('unlockedThis')){\n              //el.removeClass('btn-danger').addClass('btn-default');\n           }\n           else if(data.hasOwnProperty('suppThis')){\n              el.removeClass('friends-ok');\n           }\n\n           el.find(targetAddWay).text(data.displayText);\n           el.find(refreshIcon).addClass('hide');\n           el.find(targetAddWay).stop().slideDown('normal');\n        });\n        \n    });\n    \n    //--------------------- CHANGE MEMBERS STATUS\n    $(document).on('click', '.fn-change-member', function(e){\n        e.preventDefault();\n        var el = $(this);\n        if(el.data('confirm')){\n            var loadAction = confirm(el.data('confirm'));\n        }\n        else{\n            var loadAction = true;\n        }\n        if(loadAction){\n            var action = el.data('tl-action');\n            var user = el.data('tl-user');\n            var param = {\n                    action: action\n            };\n            var jqXhr = $.post(laroute.route('join.answer', param), {\n                postData : user\n            });\n            \n            jqXhr.success(function(data) {\n                var elTarget = el.closest('li.member-card');\n                elTarget.fadeOut('slow', function() {\n                    elTarget.replaceWith(data.viewContent);\n                    elTarget.fadeIn('slow');\n                });\n            });\n        }\n    });\n    \n  //--------------------- CHANGE INSTANCE USER ROLE\n    $(document).on('click', '.fn-change-instance-role', function(e){\n        e.preventDefault();\n        var el = $(this);\n        if(el.data('confirm')){\n            var loadAction = confirm(el.data('confirm'));\n        }\n        else{\n            var loadAction = true;\n        }\n        if(loadAction){\n            var action = el.data('tl-action');\n            var user = el.data('tl-user');\n            var param = {\n                    action: action\n            };\n            var jqXhr = $.post(laroute.route('instance.role', param), {\n                postData : user\n            });\n            \n            jqXhr.success(function(data) {\n                var elTarget = el.closest('li.member-card');\n                console.log(elTarget.attr('class'));\n                elTarget.fadeOut('slow', function() {\n                    elTarget.replaceWith(data.viewContent);\n                    elTarget.fadeIn('slow');\n                });\n            });\n        }\n    });\n    \n    //--------------------- FUNCTION ANSWER BUTTON FUNCTION\n    function answerNotif(selector, route){\n        //selector.bind(\"click\", function(e) {\n        $(document).on('click', selector, function(e){\n            \n            console.log(route);\n            console.log(selector);\n            e.preventDefault();\n            var el = $(this);\n            var user = el.data('tl-user');\n            var action = el.data('tl-action');\n            var containerElement = el.closest(\".container-element\");\n            var param = {\n                    action: action\n            };\n            var jqXhr = $.post(laroute.route(route, param), {\n                postData : user\n            });\n\n            jqXhr.success(function(data) {\n                if(user){\n                    containerElement.fadeOut();\n                }\n            });\n        });\n    };\n    \n    //--------------------- ANSWER JOIN BUTTON\n    var route = 'join.answer';\n    var selector = '.fn-join-answer';\n    answerNotif(selector, route);\n\n    //--------------------- ANSWER ASKED FRIEND BUTTON\n    var route = \"friend.answer\";\n    var selector = '.fn-ask-friend';\n    answerNotif(selector, route);\n    \n  //------------------INVITE ANSWER\n    var route = \"join.invite.answer\";\n    var selector = '.fn-join-invite';\n    answerNotif(selector, route);\n\n    //------------------ANSWER FOLLOW PROJECT\n    var btnFollow = $('.fn-follow-project');\n\n    btnFollow.bind('click', function(e) {\n        e.preventDefault();\n        var _href = $(this).attr('href');\n\n        var el = $(this);\n        var panel = el.closest(\".panel\");\n\n        var jqXhr = $.get(_href , function(data){\n        }).success(function(data) {\n            if(data){\n                panel.fadeOut();\n            }\n        });\n    });\n    \n    // --------------------- REMOVE JOIN PROFILE FUNCTION\n    $(document).on('click', '.fn-remove-join', function(e) {\n        e.preventDefault();\n        var el = $(this);\n        \n        if(confirm(el.data('confirm'))){\n            var targetJoinWay = el.find('.join-way');\n            var refreshIcon = '.glyphicon-refresh-animate';\n            var join = el.find('.glyphicon');\n            \n            var dataForeign = el.data('tl-join');\n            var jqXhr = $.post(laroute.route(\"join.remove\"), dataForeign);\n            jqXhr.success(function(data) {\n                // replace button with json view\n                console.log(data.viewContent);\n                el.fadeOut('slow', function() {\n                    el.replaceWith(data.viewContent);\n                    el.fadeIn('slow');\n                });\n            });\n        }\n    });\n\n    // --------------------- LIKE BUTTON PROFILE FUNCTION\n    $(document).on(\"click\", '#like-profile .fn-like-profile', function(e) {\n        e.preventDefault();\n        var el = $(this);\n        var route = null;\n        var actionTypeProfile = null;\n\n        if (el.data('tl-like')) {\n            var dataForeign = el.data('tl-like');\n            route = \"/netframe/like-profile\";\n            actionTypeProfile = \"like\";\n\n        } else if (el.data('tl-subscrib')) {\n            var dataForeign = el.data('tl-subscrib');\n            route = \"/netframe/subscrib-profile\";\n            actionTypeProfile = \"subscrib\";\n\n        } else {\n            return false;\n        }\n\n        var jqXhr = $.post(route, {\n            postData : dataForeign\n        });\n\n        jqXhr.done(function(data) {\n\n            if (actionTypeProfile === 'like') {\n                if (data.hasOwnProperty('liked')\n                        && data.hasOwnProperty('subscrib')) {\n                    // Change status button in On like & subscribe\n                    var targetLineNumber = el.find('.like-number');\n                        targetLineNumber.text(parseInt(targetLineNumber\n                                .text())\n                                + parseInt(data.increment));\n                    if(data.subscrib){\n                        var targetLineNumber = el.closest('#like-profile').find('.follower-number');\n                        targetLineNumber.text(parseInt(targetLineNumber\n                                .text()) \n                                + 1);\n                        el.siblings().addClass('active');\n                    }\n                    el.addClass('active');\n\n                } else if (data.hasOwnProperty('liked')) {\n                    var targetLineNumber = el.find('.like-number');\n                        targetLineNumber.text(parseInt(targetLineNumber\n                                .text())\n                                + parseInt(data.increment));\n                    // Change status button in On just like\n                    el.addClass('active');\n\n                } else if (data.hasOwnProperty('unlike')) {\n                    // Change status button like in Off\n                    el.removeClass('active');\n                    var targetLineNumber = el.find('.like-number');\n                        targetLineNumber.text(parseInt(targetLineNumber\n                                .text())\n                                + parseInt(data.increment));\n                }\n            } else if (actionTypeProfile === 'subscrib') {\n                if (data.hasOwnProperty('subscrib') && data.subscrib) {\n                    // Change status button subscrib in On\n                    el.addClass('active');\n                    var targetLineNumber = el.find('.follower-number');\n                        targetLineNumber.text(parseInt(targetLineNumber\n                                .text())\n                                + 1);\n                } else if (data.hasOwnProperty('unsubscrib')) {\n                    // Change status button subscrib in Off\n                    el.removeClass('active');\n                    var targetLineNumber = el.find('.follower-number');\n                        targetLineNumber.text(parseInt(targetLineNumber\n                                .text())\n                                - 1);\n                }\n            }\n        });\n    });\n    \n    // --------------------- NO LONGER FOLLOW BUTTON\n    $(document).on(\"click\", '.fn-stop-follow', function(e) {\n        e.preventDefault();\n        var el = $(this);\n       \n        var profileType = $(this).data('profile-type');\n        var profileId = $(this).data('profile-id');\n        \n        var param = {\n                profile_type: profileType,\n                profile_id: profileId,\n                noFollow: 1\n            };\n\n        $.post(\"/netframe/subscrib-profile\", {postData : param})\n            .success(function (data) {\n                if(data.hasOwnProperty('unsubscrib')){\n                    $('article.post-'+profileType+'-'+profileId).fadeOut('slow', function() {\n                        $(this).remove();\n                    });\n                }\n            });\n    });\n\t\n\t// --------------------- BOOKMARK (CLIP)\n    $(document).on('click', '.fn-tl-clip', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        \n        var el = $(this);\n        var profileType = $(this).data('profile-type');\n        var profileId = $(this).data('profile-id');\n        \n        if($(this).attr('data-media-id')){\n            //clip media\n            var mediaId = $(this).data('media-id');\n            \n            var param = {\n                profileType: profileType,\n                profileId: profileId,\n                mediaId: mediaId\n            };\n            var routeClip = 'playlist_user_profile_media_bookmark';\n        }\n        else{\n            //clip profile\n            var param = {\n                profileType: profileType,\n                profileId: profileId\n            };\n            var routeClip = 'playlist_user_profile_bookmark';\n        }\n                    \n\n        $.post(baseUrl + laroute.route(routeClip, param))\n            .success(function (data) {\n                if(data.result == 'add'){\n                    el.addClass('active');\n                    el.find('span').addClass('text-secondary');\n                }\n                else if(data.result == 'remove'){\n                    el.removeClass('active');\n                    el.find('span').removeClass('text-secondary');\n                }\n            });\n    });\n\t\n    // --------------------- SHARE BUTTON FUNCTION\n    $(document).on('click', '.fn-netframe-share', function(e) {\n        e.preventDefault();\n    });\n    \n    // --------------------- PINTOP BUTTON FUNCTION\n    $(document).on('click', '.fn-netframe-pintop', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        var el = $(this);\n\n        var dataForeign = el.data('tl-pintop');\n\n        var jqXhr = $.post(\"/netframe/pintop\", {\n            postData : dataForeign\n        });\n\n        jqXhr.success(function(data) {\n            window.location.reload();\n        }).error(function(xhr) {\n            console.log(xhr.responseText);\n        }).complete(function(data) {\n            el.find(refreshIcon).addClass('hide');\n            el.find('.label-info').stop().slideDown('normal',\n                    function() {\n                        $(this).removeAttr('style');\n                    });\n        });\n\n    });\n\t\n    //========= Post Ajax Form for Modal publish and return response\n    $('#modal-ajax').on('click', 'button[type=\"submit\"]', function(event) {\n        _form = $(this).parents('.modal-content').find('form');\n        if(!_form.hasClass('no-auto-submit')){\n            submitModal(event, _form);\n        }\n    });\n\n    $('#modal-ajax').on('submit', 'form', function(event) {\n        if(!$(this).hasClass('no-auto-submit')){\n            submitModal(event,$(this));\n        }\n    });\n\t\n\t$('.fn-tl-post').on('submit', 'form', function(event) {\n        if(!$(this).hasClass('no-auto-submit')){\n            submitModal(event,$(this));\n        }\n    });\t\n    \n    // -------------------------- Modal ajax comments\n    $('.modal-ajax-comments').on('click', 'button[type=\"submit\"]', function(event) {\n        event.preventDefault();\n\n        var modalId = '#'+$(this).parents('.modal.modal-ajax-comments').attr('id');\n        var modalContent = $(modalId+' .modal-content');\n        var _form = $(this).parents('.modal-content').find('form');\n        var actionUrl = _form.attr('action');\n        var formData = _form.find('input, hidden, select, textarea, radio, checkbox').serializeArray();\n\n        // add data to object array serialized json\n        formData.push({\n            name: \"httpReferer\",\n            value: requestUrl\n        });\n\n        $.ajax({\n            url: actionUrl,\n            data: formData,\n            type: \"POST\",\n            success: function( data ) {\n                $(modalId).find('.modal-content').html(data.view);\n\n                if(typeof data.redirect != 'undefined') {\n                    window.location = data.redirect;\n                }\n\n                if(typeof data.closeModal != 'undefined') {\n                    $(modalId).modal('hide');\n                }\n\n                // If publish model is A COMMENTARY, getback response\n                if(typeof data.viewComment != 'undefined') {\n                    $(modalId).modal('hide');\n\n                    var elTarget = $(data.targetId);\n\n                    // stop duplicate add when is in Ajax\n                    event.stopPropagation();\n                    // If is COMMENT in Insert Mode\n                    //if(typeof data.edit != \"undefined\") {\n                    if(data.edit == 'false') {\n                        $(data.viewComment).appendTo($('.block-comment', elTarget)).hide().slideDown('normal');\n                    }\n                    else {\n                        // If is COMMENT in Edit Mode\n                        elTarget.fadeOut('slow', function() {\n                            elTarget.replaceWith(data.viewComment);\n                            elTarget.fadeIn('slow');\n                        });\n                    }\n                }\n            },\n            error: function(textStatus, errorThrown) {\n                //console.log(textStatus);\n            }\n        });\n\n    });\n    \n    // --------------------------  hide panel with slide up\n    $(document).on('click', '.fn-close-panel', function(e){\n       e.preventDefault();\n       $(this).closest('.panel')['slideUp'](); \n    });\n\n    // display or hide importers\n    $(document).on('click','#displayImport', function(e){\n        var el = $(this);\n        modalParent = el.closest('.modal');\n        if(modalParent.find('.importMediaModal').hasClass('hidden')){\n            modalParent.find('.importMediaModal').removeClass('hidden');\n        }else{\n            modalParent.find('.importMediaModal').addClass('hidden');\n        }\n    });\n    \n    //LIMIT textarea input max chars\n    $('.fn-textarea-limit').each(function(){\n        maxChars = $(this).data('textarea-limit');\n        leftChars = maxChars - $(this).val().length;\n        \n        textDisplayed = $(this).data('limit-text');\n        var countDown = $('<span class=\"texearea-counter pull-right\"><span class=\"counter\">'+leftChars+'</span> '+textDisplayed+'</span>').insertAfter($(this));\n        \n        $(this).keyup(function () {\n            leftChars = maxChars - $(this).val().length;\n            if(leftChars <= 0){\n                countDown.addClass(\"text-danger\");\n                leftChars  = 0\n                inputText = $(this).val();\n                cutInputText = inputText.substring(0, maxChars);\n                $(this).val(cutInputText);\n            }\n            if(leftChars > 0){\n                countDown.removeClass(\"text-danger\");\n            }\n            countDown.find('.counter').text(leftChars);\n            \n        });\n        \n    });\n    \n    // ========= participate to event\n\t$(document).on('click','.fn-event-participate', function(e){\n        e.preventDefault();\n\t\tvar el = $(this);\n\t\tvar params = {\n\t\t\teventId: el.data('event')\n\t\t};\n\t\t\n\t\t$.post(baseUrl + laroute.route('event.participate', params))\n\t\t\t.success(function(data) {\n\t\t\t\t//modify button\n                var targetLineNumber = el.find('.participant-number');\n                if(data.participate){                    \n                    targetLineNumber.text(parseInt(targetLineNumber.text()) + parseInt(data.increment));\n                    el.addClass('active');\n                }\n                else{\n                    targetLineNumber.text(parseInt(targetLineNumber.text()) + parseInt(data.increment));\n                    el.removeClass('active');\n                }\n\t\t\t});\n    });\n    \n    //=============== switch post content view from digest to complete view\n    $(document).on('click', '.fn-switch-post-content', function(e){\n        e.preventDefault();\n        var el = $(this);\n        targetDisplay = el.data('target');\n        el.closest('p').hide();\n        $(targetDisplay).show();       \n        \n    });\n\t\n\t// ========= \n    $(document).on('click','.fn-tl-hide', function(e){\n        elementToHide = $(this).data('container');\n        elementToShow = $(this).data('target');\n        $(elementToHide).hide();\n        $(elementToShow).show();\n        if($(elementToShow).hasClass('hidden')){\n            $(elementToShow).removeClass('hidden');\n        }\n    });\n    \n\n    // RE-GELOCALIZE WITH BROWSER COORDINATES\n    function myPosition(position) {\n        latitude = position.coords.latitude;\n        longitude = position.coords.longitude;\n\n        // send geoloc via ajax\n        $.ajax({\n            url: \"/netframe/set-geolocation\",\n            data: {latitude: latitude, longitude: longitude},\n            type: \"POST\",\n            success: function( data ){}\n        });\n    }\n\n    function errorPosition(error) {\n        // stop geolocation and switch to geoloc by ip\n        $.ajax({\n            url: \"/netframe/set-geolocation\",\n            data: {stop: '1'},\n            type: \"POST\",\n            success: function( data ){\n            }\n        });\n    }\n\t\n\t//send gmt to server\n\tgmtOffset = new Date().getTimezoneOffset();\n\t$.ajax({\n            url: \"/netframe/set-gmt\",\n            data: {gmt: gmtOffset},\n            type: \"POST\",\n            success: function( data ){\n            }\n        });\n})(jQuery);\n//# sourceMappingURL=app.js.map\n"]}